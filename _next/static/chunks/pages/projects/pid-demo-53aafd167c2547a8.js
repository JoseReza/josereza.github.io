(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[756],{100:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var i=t(7876),a=t(4232),n=t(8230),l=t.n(n);function o(){let[e,r]=(0,a.useState)(!1),[t,n]=(0,a.useState)(50),[o,s]=(0,a.useState)({kp:1.2,ki:.3,kd:.05}),[d,c]=(0,a.useState)(20),[x,u]=(0,a.useState)(0),[p,h]=(0,a.useState)(0),[y,v]=(0,a.useState)([]),m=(0,a.useRef)(0),g=(0,a.useRef)(0),b=(0,a.useRef)(performance.now()),j=(0,a.useRef)(0);(0,a.useEffect)(()=>{if(!e){j.current&&(cancelAnimationFrame(j.current),j.current=0);return}let r=()=>{let e=performance.now(),i=Math.max(1,e-b.current)/1e3,a=1/d;i>=a&&(b.current=e,u(r=>{let i=t-r;m.current+=i*a;let n=(i-g.current)/a,l=o.kp*i+o.ki*m.current+o.kd*n;g.current=i;let s=Math.max(-100,Math.min(100,l));h(s);let d=r+(-1.2*r+.8*s)*a+(Math.random()-.5)*.6;return v(r=>{let i=[...r,{t:e,pv:d,sp:t,u:s}];return i.length>400?i.slice(i.length-400):i}),d})),j.current=requestAnimationFrame(r)};return j.current=requestAnimationFrame(r),()=>{j.current&&(cancelAnimationFrame(j.current),j.current=0)}},[e,d,o.kp,o.ki,o.kd,t]);let f=(0,a.useCallback)(()=>{r(!1),j.current&&(cancelAnimationFrame(j.current),j.current=0),m.current=0,g.current=0,u(0),h(0),v([]),b.current=performance.now()},[]),k=(0,a.useCallback)(()=>{r(e=>!e)},[]),{width:w,height:S,pad:C}={width:700,height:340,pad:48},F=(0,a.useMemo)(()=>{if(y.length<2)return{pv:"",sp:""};let e=y.map((e,r)=>r),r=w-2*C-2,t=e=>S-C-(e- -20)/140*(S-2*C),i=(t,i)=>t.map((t,a)=>"".concat(0===a?"M":"L").concat((C+e[a]/399*r).toFixed(1),",").concat(i(t).toFixed(1))).join(" ");return{pv:i(y.map(e=>e.pv),t),sp:i(y.map(e=>e.sp),t)}},[y]);return(0,i.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto",padding:"40px 24px",background:"var(--background)",color:"var(--text-color)"},children:[(0,i.jsx)(l(),{href:"/",style:{display:"inline-block",marginBottom:24,color:"var(--text-color)",textDecoration:"none",padding:"8px 16px",background:"var(--hover-bg)",borderRadius:6},children:"â† Volver al Portafolio"}),(0,i.jsx)("h1",{style:{fontSize:"2rem",marginBottom:8},children:"Control PID en vivo"}),(0,i.jsx)("p",{style:{opacity:.8,marginBottom:16},children:"Se\xf1al real simulada, setpoint y control PID con visualizaci\xf3n en tiempo real."}),(0,i.jsx)("section",{style:{background:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:12,padding:16,boxShadow:"0 2px 4px var(--shadow)",marginBottom:16},children:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Kp"}),(0,i.jsx)("input",{type:"range",min:0,max:5,step:.05,value:o.kp,onChange:e=>s({...o,kp:Number(e.target.value)}),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["Kp: ",o.kp.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Ki"}),(0,i.jsx)("input",{type:"range",min:0,max:2,step:.01,value:o.ki,onChange:e=>s({...o,ki:Number(e.target.value)}),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["Ki: ",o.ki.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Kd"}),(0,i.jsx)("input",{type:"range",min:0,max:1,step:.01,value:o.kd,onChange:e=>s({...o,kd:Number(e.target.value)}),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["Kd: ",o.kd.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Setpoint"}),(0,i.jsx)("input",{type:"range",min:0,max:100,step:1,value:t,onChange:e=>n(Number(e.target.value)),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["SP: ",t.toFixed(0)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Frecuencia (Hz)"}),(0,i.jsx)("input",{type:"range",min:5,max:60,step:1,value:d,onChange:e=>c(Number(e.target.value)),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:[d," Hz"]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"end"},children:[(0,i.jsx)("button",{onClick:k,style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--card-border)",background:e?"var(--error-color, #ef4444)":"var(--success-color, #10b981)",color:"white",cursor:"pointer",transition:"all 0.2s ease"},children:e?"Pausar":"Iniciar"}),(0,i.jsx)("button",{onClick:f,style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--card-border)",background:"var(--hover-bg)",cursor:"pointer",transition:"all 0.2s ease"},children:"Reset"})]})]})}),(0,i.jsx)("section",{style:{background:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:12,padding:12,boxShadow:"0 2px 4px var(--shadow)"},children:(0,i.jsx)("div",{style:{width:"100%",margin:"0 auto",aspectRatio:"".concat(w," / ").concat(S)},children:(0,i.jsxs)("svg",{viewBox:"0 0 ".concat(w," ").concat(S),width:"100%",height:"100%",role:"img","aria-label":"Gr\xe1fica PID",style:{display:"block"},children:[(0,i.jsx)("rect",{x:0,y:0,width:w,height:S,fill:"var(--background)"}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"plotClip",children:(0,i.jsx)("rect",{x:C,y:C,width:w-2*C-2,height:S-2*C})})}),Array.from({length:6},(e,r)=>(0,i.jsx)("line",{x1:C,x2:w-C-2,y1:C+(S-2*C)/5*r,y2:C+(S-2*C)/5*r,stroke:"var(--card-border)",strokeWidth:1,opacity:.5},r)),(0,i.jsx)("line",{x1:C,y1:S-C,x2:w-C-2,y2:S-C,stroke:"var(--card-border)",strokeWidth:1.5}),(0,i.jsx)("line",{x1:C,y1:C,x2:C,y2:S-C,stroke:"var(--card-border)",strokeWidth:1.5}),(0,i.jsxs)("g",{clipPath:"url(#plotClip)",children:[(0,i.jsx)("path",{d:F.sp,stroke:"#10b981",strokeWidth:2.5,fill:"none"}),(0,i.jsx)("path",{d:F.pv,stroke:"#60a5fa",strokeWidth:2.5,fill:"none"})]}),(0,i.jsxs)("g",{children:[(0,i.jsx)("rect",{x:C,y:10,width:220,height:24,rx:6,fill:"var(--card-bg)",stroke:"var(--card-border)"}),(0,i.jsx)("circle",{cx:C+12,cy:22,r:4,fill:"#10b981"}),(0,i.jsx)("text",{x:C+22,y:26,fill:"var(--text-color)",style:{fontSize:12},children:"SP (verde)"}),(0,i.jsx)("circle",{cx:C+110,cy:22,r:4,fill:"#60a5fa"}),(0,i.jsx)("text",{x:C+120,y:26,fill:"var(--text-color)",style:{fontSize:12},children:"PV (azul)"})]}),(()=>{let e=y.length>1?(y[y.length-1].t-y[0].t)/1e3:0,r=[];for(let t=0;t<=5;t++){let a=t/5,n=C+a*(w-2*C),l="".concat((e*a).toFixed(1),"s");r.push((0,i.jsxs)("g",{children:[(0,i.jsx)("line",{x1:n,x2:n,y1:S-C,y2:S-C+6,stroke:"var(--card-border)"}),(0,i.jsx)("text",{x:n,y:S-C+20,fill:"var(--text-color)",textAnchor:"middle",style:{fontSize:11},children:l})]},"xt".concat(t)))}for(let e=0;e<=5;e++){let t=e/5,a=S-C-t*(S-2*C),n=-20+140*t;r.push((0,i.jsxs)("g",{children:[(0,i.jsx)("line",{x1:C-6,x2:C,y1:a,y2:a,stroke:"var(--card-border)"}),(0,i.jsx)("text",{x:C-10,y:a+4,fill:"var(--text-color)",textAnchor:"end",style:{fontSize:11},children:n.toFixed(0)})]},"yt".concat(e)))}return r.push((0,i.jsx)("text",{x:w/2,y:S-8,fill:"var(--text-color)",textAnchor:"middle",style:{fontSize:12,opacity:.9},children:"Tiempo (s)"},"xlabel")),r.push((0,i.jsx)("text",{x:16,y:S/2,fill:"var(--text-color)",textAnchor:"middle",transform:"rotate(-90 16 ".concat(S/2,")"),style:{fontSize:12,opacity:.9},children:"Magnitud"},"ylabel")),r})()]})})})]})}},488:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/pid-demo",function(){return t(100)}])}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=488)),_N_E=e.O()}]);