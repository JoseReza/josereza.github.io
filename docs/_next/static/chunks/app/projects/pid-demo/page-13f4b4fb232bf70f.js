(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{4428:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var i=r(5155),a=r(2115),l=r(2619),n=r.n(l);function o(){let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)(50),[o,s]=(0,a.useState)({kp:1.2,ki:.3,kd:.05}),[d,c]=(0,a.useState)(20),[x,h]=(0,a.useState)(0),[p,u]=(0,a.useState)(0),[y,v]=(0,a.useState)([]),g=(0,a.useRef)(0),m=(0,a.useRef)(0),b=(0,a.useRef)(performance.now());(0,a.useEffect)(()=>{if(!e)return;let t=0,i=()=>{let e=performance.now(),a=Math.max(1,e-b.current)/1e3,l=1/d;if(a>=l||0===y.length){b.current=e;let t=r-x;g.current+=t*l;let i=(t-m.current)/l,a=o.kp*t+o.ki*g.current+o.kd*i;m.current=t;let n=Math.max(-100,Math.min(100,a));u(n);let s=x+(-1.2*x+.8*n)*l+(Math.random()-.5)*.6;h(s),v(t=>{let i=[...t,{t:e,pv:s,sp:r,u:n}];return i.length>400?i.slice(i.length-400):i})}t=requestAnimationFrame(i)};return t=requestAnimationFrame(i),()=>cancelAnimationFrame(t)},[e,d,o,r,x,y.length]);let{width:j,height:f,pad:k}={width:700,height:340,pad:48},w=(0,a.useMemo)(()=>{if(y.length<2)return{pv:"",sp:""};let e=y.map((e,t)=>t),t=j-2*k-2,r=e=>f-k-(e- -20)/140*(f-2*k),i=(r,i)=>r.map((r,a)=>"".concat(0===a?"M":"L").concat((k+e[a]/399*t).toFixed(1),",").concat(i(r).toFixed(1))).join(" ");return{pv:i(y.map(e=>e.pv),r),sp:i(y.map(e=>e.sp),r)}},[y]);return(0,i.jsxs)("div",{style:{maxWidth:1e3,margin:"0 auto",padding:"40px 24px",background:"var(--background)",color:"var(--text-color)"},children:[(0,i.jsx)(n(),{href:"/",style:{display:"inline-block",marginBottom:24,color:"var(--text-color)",textDecoration:"none",padding:"8px 16px",background:"var(--hover-bg)",borderRadius:6},children:"â† Volver al Portafolio"}),(0,i.jsx)("h1",{style:{fontSize:"2rem",marginBottom:8},children:"Control PID en vivo"}),(0,i.jsx)("p",{style:{opacity:.8,marginBottom:16},children:"Se\xf1al real simulada, setpoint y control PID con visualizaci\xf3n en tiempo real."}),(0,i.jsx)("section",{style:{background:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:12,padding:16,boxShadow:"0 2px 4px var(--shadow)",marginBottom:16},children:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Kp"}),(0,i.jsx)("input",{type:"range",min:0,max:5,step:.05,value:o.kp,onChange:e=>s({...o,kp:Number(e.target.value)}),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["Kp: ",o.kp.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Ki"}),(0,i.jsx)("input",{type:"range",min:0,max:2,step:.01,value:o.ki,onChange:e=>s({...o,ki:Number(e.target.value)}),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["Ki: ",o.ki.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Kd"}),(0,i.jsx)("input",{type:"range",min:0,max:1,step:.01,value:o.kd,onChange:e=>s({...o,kd:Number(e.target.value)}),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["Kd: ",o.kd.toFixed(2)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Setpoint"}),(0,i.jsx)("input",{type:"range",min:0,max:100,step:1,value:r,onChange:e=>l(Number(e.target.value)),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:["SP: ",r.toFixed(0)]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Frecuencia (Hz)"}),(0,i.jsx)("input",{type:"range",min:5,max:60,step:1,value:d,onChange:e=>c(Number(e.target.value)),style:{width:"100%"}}),(0,i.jsxs)("div",{style:{opacity:.8},children:[d," Hz"]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"end"},children:[(0,i.jsx)("button",{onClick:()=>t(e=>!e),style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--card-border)",background:"var(--hover-bg)",cursor:"pointer"},children:e?"Pausar":"Iniciar"}),(0,i.jsx)("button",{onClick:()=>{t(!1),g.current=0,m.current=0,h(0),u(0),v([]),b.current=performance.now()},style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--card-border)",background:"var(--hover-bg)",cursor:"pointer"},children:"Reset"})]})]})}),(0,i.jsx)("section",{style:{background:"var(--card-bg)",border:"1px solid var(--card-border)",borderRadius:12,padding:12,boxShadow:"0 2px 4px var(--shadow)"},children:(0,i.jsx)("div",{style:{width:"100%",margin:"0 auto",aspectRatio:"".concat(j," / ").concat(f)},children:(0,i.jsxs)("svg",{viewBox:"0 0 ".concat(j," ").concat(f),width:"100%",height:"100%",role:"img","aria-label":"Gr\xe1fica PID",style:{display:"block"},children:[(0,i.jsx)("rect",{x:0,y:0,width:j,height:f,fill:"var(--background)"}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"plotClip",children:(0,i.jsx)("rect",{x:k,y:k,width:j-2*k-2,height:f-2*k})})}),Array.from({length:6},(e,t)=>(0,i.jsx)("line",{x1:k,x2:j-k-2,y1:k+(f-2*k)/5*t,y2:k+(f-2*k)/5*t,stroke:"var(--card-border)",strokeWidth:1,opacity:.5},t)),(0,i.jsx)("line",{x1:k,y1:f-k,x2:j-k-2,y2:f-k,stroke:"var(--card-border)",strokeWidth:1.5}),(0,i.jsx)("line",{x1:k,y1:k,x2:k,y2:f-k,stroke:"var(--card-border)",strokeWidth:1.5}),(0,i.jsxs)("g",{clipPath:"url(#plotClip)",children:[(0,i.jsx)("path",{d:w.sp,stroke:"#10b981",strokeWidth:2.5,fill:"none"}),(0,i.jsx)("path",{d:w.pv,stroke:"#60a5fa",strokeWidth:2.5,fill:"none"})]}),(0,i.jsxs)("g",{children:[(0,i.jsx)("rect",{x:k,y:10,width:220,height:24,rx:6,fill:"var(--card-bg)",stroke:"var(--card-border)"}),(0,i.jsx)("circle",{cx:k+12,cy:22,r:4,fill:"#10b981"}),(0,i.jsx)("text",{x:k+22,y:26,fill:"var(--text-color)",style:{fontSize:12},children:"SP (verde)"}),(0,i.jsx)("circle",{cx:k+110,cy:22,r:4,fill:"#60a5fa"}),(0,i.jsx)("text",{x:k+120,y:26,fill:"var(--text-color)",style:{fontSize:12},children:"PV (azul)"})]}),(()=>{let e=y.length>1?(y[y.length-1].t-y[0].t)/1e3:0,t=[];for(let r=0;r<=5;r++){let a=r/5,l=k+a*(j-2*k),n="".concat((e*a).toFixed(1),"s");t.push((0,i.jsxs)("g",{children:[(0,i.jsx)("line",{x1:l,x2:l,y1:f-k,y2:f-k+6,stroke:"var(--card-border)"}),(0,i.jsx)("text",{x:l,y:f-k+20,fill:"var(--text-color)",textAnchor:"middle",style:{fontSize:11},children:n})]},"xt".concat(r)))}for(let e=0;e<=5;e++){let r=e/5,a=f-k-r*(f-2*k),l=-20+140*r;t.push((0,i.jsxs)("g",{children:[(0,i.jsx)("line",{x1:k-6,x2:k,y1:a,y2:a,stroke:"var(--card-border)"}),(0,i.jsx)("text",{x:k-10,y:a+4,fill:"var(--text-color)",textAnchor:"end",style:{fontSize:11},children:l.toFixed(0)})]},"yt".concat(e)))}return t.push((0,i.jsx)("text",{x:j/2,y:f-8,fill:"var(--text-color)",textAnchor:"middle",style:{fontSize:12,opacity:.9},children:"Tiempo (s)"},"xlabel")),t.push((0,i.jsx)("text",{x:16,y:f/2,fill:"var(--text-color)",textAnchor:"middle",transform:"rotate(-90 16 ".concat(f/2,")"),style:{fontSize:12,opacity:.9},children:"Magnitud"},"ylabel")),t})()]})})})]})}},8055:(e,t,r)=>{Promise.resolve().then(r.bind(r,4428))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=8055)),_N_E=e.O()}]);